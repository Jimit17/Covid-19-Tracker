<%- include('header'); -%>
<head>
    <link rel="stylesheet" href="../stylesheets/dateviewstyle.css">
    <title>COVID-19 Dashboard</title>
</head>
<body>
<div id="d4">
<h2>COVID-19 Dashboard</h2>

<form id="dateForm" method="post" action="/viewdate">
<div class="date-selector">
    <label for="dateFilter">Select Date:</label>
    <input type="date" id="dateFilter" name="dateFilter" onchange="submitForm()">
</div>
</form>

<table id="dashboardTable">
    <thead>
        <tr>
            <th>Date</th>
            <th>State</th>
            <th>Samples Collected</th>
            <th>Positive Cases</th>
            <th>Negative Cases</th>
            <th>Discharges</th>
            <th>Deaths</th>
        </tr>
    </thead>
    <% if(Details.length>0) { %>
        <tbody>
            <% for(var i=0; i<Details.length; i++) { %>
                <tr>
                    <td><%= Details[i].Date_of_Record %></td>
                    <td><%= Details[i].State_Name %></td>
                    <td><%= Details[i].No_of_Samples %></td>
                    <td><%= Details[i].No_of_Positive %></td>
                    <td><%= Details[i].No_of_Negative %></td>
                    <td><%= Details[i].No_of_Discharge %></td>
                    <td><%= Details[i].No_of_Deaths %></td>
                </tr>
            <% } %>
        </tbody>
     <% } %>
</table>
</div>

<script>
    function submitForm() {
        document.getElementById("dateForm").submit();
    }
</script>

</body>
